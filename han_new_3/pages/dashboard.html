<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–Ω–∞—è - HAN CRM</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar">
        <div class="nav-brand">
            <h1>üåª HAN CRM</h1>
        </div>
        <div class="nav-menu">
            <a href="dashboard.html" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="sales.html">–ü—Ä–æ–¥–∞–∂–∏</a>
            <a href="clients.html">–ö–ª–∏–µ–Ω—Ç—ã</a>
            <a href="products.html">–¢–æ–≤–∞—Ä—ã</a>
            <a href="production.html" data-role="manager,admin">–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</a>
            <a href="writeoffs.html" data-role="manager,admin">–°–ø–∏—Å–∞–Ω–∏—è</a>
            <a href="stock.html" data-role="manager,admin">–°–∫–ª–∞–¥</a>
            <a href="reports.html" data-role="manager,admin">–û—Ç—á—ë—Ç—ã</a>
        </div>
        <div class="nav-user">
            <span id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
            <button onclick="logout()" class="btn-logout">–í—ã—Ö–æ–¥</button>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="container">
        <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
        <div class="welcome-section">
            <div class="welcome-text">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userNameTitle">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>!</h2>
                <p>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è HAN CRM v3.1</p>
            </div>
            <div class="welcome-date">
                <div class="date-display" id="currentDate"></div>
                <div class="time-display" id="currentTime"></div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="main-stats">
            <div class="stat-card primary">
                <div class="stat-icon">üí∞</div>
                <div class="stat-content">
                    <div class="stat-label">–ü—Ä–æ–¥–∞–∂–∏ —Å–µ–≥–æ–¥–Ω—è</div>
                    <div class="stat-value" id="statTodaySales">0 —Å–æ–º</div>
                    <div class="stat-detail" id="statTodaySalesCount">0 —á–µ–∫–æ–≤</div>
                </div>
                <a href="sales.html" class="stat-link">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>

            <div class="stat-card success">
                <div class="stat-icon">üí≥</div>
                <div class="stat-content">
                    <div class="stat-label">–ü–ª–∞—Ç–µ–∂–∏ —Å–µ–≥–æ–¥–Ω—è</div>
                    <div class="stat-value" id="statTodayPayments">0 —Å–æ–º</div>
                    <div class="stat-detail" id="statTodayPaymentsCount">0 –ø–ª–∞—Ç–µ–∂–µ–π</div>
                </div>
            </div>

            <div class="stat-card warning">
                <div class="stat-icon">üì¶</div>
                <div class="stat-content">
                    <div class="stat-label">–¢–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥–µ</div>
                    <div class="stat-value" id="statStockTotal">0</div>
                    <div class="stat-detail" id="statStockLow">0 —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</div>
                </div>
                <a href="stock.html" class="stat-link">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>

            <div class="stat-card danger">
                <div class="stat-icon">üìä</div>
                <div class="stat-content">
                    <div class="stat-label">–î–æ–ª–≥–∏</div>
                    <div class="stat-value" id="statDebtTotal">0 —Å–æ–º</div>
                    <div class="stat-detail" id="statDebtCount">0 –¥–æ–ª–∂–Ω–∏–∫–æ–≤</div>
                </div>
                <a href="clients.html" class="stat-link">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="quick-actions">
            <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <div class="actions-grid">
                <a href="sales.html" class="action-card">
                    <div class="action-icon">üõí</div>
                    <div class="action-title">–ù–æ–≤–∞—è –ø—Ä–æ–¥–∞–∂–∞</div>
                    <div class="action-desc">–û—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É</div>
                </a>
                <a href="clients.html" class="action-card" data-role="manager,admin">
                    <div class="action-icon">üë•</div>
                    <div class="action-title">–ö–ª–∏–µ–Ω—Ç—ã</div>
                    <div class="action-desc">–ë–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                </a>
                <a href="products.html" class="action-card">
                    <div class="action-icon">üì¶</div>
                    <div class="action-title">–¢–æ–≤–∞—Ä—ã</div>
                    <div class="action-desc">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</div>
                </a>
                <a href="production.html" class="action-card" data-role="manager,admin">
                    <div class="action-icon">üè≠</div>
                    <div class="action-title">–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</div>
                    <div class="action-desc">–£—á—ë—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</div>
                </a>
                <a href="writeoffs.html" class="action-card" data-role="manager,admin">
                    <div class="action-icon">üóëÔ∏è</div>
                    <div class="action-title">–°–ø–∏—Å–∞–Ω–∏—è</div>
                    <div class="action-desc">–°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</div>
                </a>
                <a href="reports.html" class="action-card" data-role="manager,admin">
                    <div class="action-icon">üìà</div>
                    <div class="action-title">–û—Ç—á—ë—Ç—ã</div>
                    <div class="action-desc">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                </a>
            </div>
        </div>

        <!-- –î–≤–µ –∫–æ–ª–æ–Ω–∫–∏: –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ + –¥–æ–ª–∂–Ω–∏–∫–∏ -->
        <div class="dashboard-grid">
            <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ -->
            <div class="dashboard-widget">
                <div class="widget-header">
                    <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏</h3>
                    <a href="sales.html" class="widget-link">–í—Å–µ ‚Üí</a>
                </div>
                <div class="widget-body">
                    <div id="recentSales">
                        <div class="loader"></div>
                    </div>
                </div>
            </div>

            <!-- –î–æ–ª–∂–Ω–∏–∫–∏ -->
            <div class="dashboard-widget">
                <div class="widget-header">
                    <h3>–¢–æ–ø –¥–æ–ª–∂–Ω–∏–∫–∏</h3>
                    <a href="clients.html" class="widget-link">–í—Å–µ ‚Üí</a>
                </div>
                <div class="widget-body">
                    <div id="topDebtors">
                        <div class="loader"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–∫–ª–∞–¥: –º–∞–ª–æ —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="dashboard-widget" data-role="manager,admin">
            <div class="widget-header">
                <h3>–¢–æ–≤–∞—Ä—ã —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è</h3>
                <a href="stock.html" class="widget-link">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∫–ª–∞–¥ ‚Üí</a>
            </div>
            <div class="widget-body">
                <div id="lowStockProducts">
                    <div class="loader"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script type="module" src="../js/pages/dashboard.js"></script>
    <script>
        function logout() {
            if (confirm('–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã?')) {
                localStorage.removeItem('auth_token');
                localStorage.removeItem('user');
                window.location.href = '../login.html';
            }
        }
    </script>
</body>
</html>